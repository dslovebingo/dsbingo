<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>DS LoveBingo</title>
<style>
  body {
    margin:0;
    padding:0;
    background:#fff;
    font-family:sans-serif;
    overflow:hidden;
  }

  /* 빙고판이 보일 영역이랑 맞춰서 위치 잡기 */
  #loader {
    position:absolute;
    top:400px;   /* bingo 캔버스 시작 위치에 맞게 숫자 조절 */
    left:200px;
    display:flex;
    align-items:center;
    gap:10px;
  }

  .loader-circle {
    width:80px;
    height:80px;
    border:20px solid #ccc;
    border-top-color:#000;
    border-radius:50%;
    animation:spin 1s linear infinite;
  }

  @keyframes spin {
    100% { transform:rotate(360deg); }
  }

  /* 빙고 게임 iframe */
  #gameFrame {
    position:absolute;
    top:40px;
    left:40px;
    width:100vw;
    height:100vh;
    border:none;
    display:none;   /* 처음엔 숨겨놓음 */
  }
</style>
</head>
<body>

<div id="loader">
  <div class="loader-circle"></div>
</div>

<iframe id="gameFrame" src="bingo.html"></iframe>

<script>
  // 이미 새로고침 한 적이 있는지 체크
  const alreadyRefreshed = localStorage.getItem("bingoFirstReloadDone");

  const loader = document.getElementById("loader");   // 로딩 div
  const frame  = document.getElementById("gameFrame"); // 빙고 iframe (있으면)

  // 혹시 null이어도 에러 안 나게 기본값 처리
  if (loader) loader.style.display = "none";
  if (frame)  frame.style.display  = "none";

  if (!alreadyRefreshed) {
    // ✅ 첫 방문일 때만: 2.5초 후 로딩 보여주고, 3초 후 새로고침

    // 2.5초 후 로딩 표시
    setTimeout(function () {
      if (loader) loader.style.display = "flex";
    }, 2500);

    // 3초 후 새로고침 (단, 다시 안 하게 플래그 저장)
    setTimeout(function () {
      localStorage.setItem("bingoFirstReloadDone", "true");
      location.reload();
    }, 3000);

  } else {
    // ✅ 이미 새로고침 한 적 있으면: 이제부터는 새로고침 X
    // 여기서부터는 "원래 쓰던 로딩 + 빙고 표시 로직"만 돌면 됨

    if (loader) loader.style.display = "flex";

    // bingo.html 로딩시키고, 다 로딩되면 로딩 숨기고 iframe 보이기
    if (frame) {
      frame.style.display = "none";         // 처음엔 숨기고
      frame.addEventListener("load", function () {
        if (loader) loader.style.display = "none";
        frame.style.display = "block";      // 로딩 끝나면 보여주기
      });

      // iframe src가 HTML에 이미 써있으면 이 줄은 생략해도 됨
      // frame.src = "bingo.html";
    }
  }
</script>




</body>
</html>
